---
layout: post
title: "《redis开发与运维》笔记(一)——初识redis"
date: 2020-11-10 
description: "《redis开发与运维》笔记(一)——初识redis"
tag: Redis
--- 
### 《redis开发与运维》笔记(一)——初识redis

#### redis简介
> redis是一种基于kv键值对组成的纯内存操作的NoSql数据库。

#### redis特性
* ##### 速度快
> redis官方给出读写的性能指标每秒达到10w

	**为什么速度快？**

	1：基于纯内存操作

	2：redis是基于C语言,C语言是最接近操作系统的
	
	3：redis是单线程，避免了多线程中线程之间的切换与锁的竞争带来的开销。
	
	4：IO多复路
		
* ##### 丰富的数据结构（字符串，哈希，列表，集合，有序集合）
* ##### 丰富的功能
		除了丰富的数据结构外，还支持丰富的功能如事务，发布与订阅。支持LUA脚本，键过期，执行命令批操作（pipeline,一次性将一批命令发送到redis，减少网络的开销）等功能
* ##### 持久化
> redis支持两种持久化RDB与AOF

	我们可以假设一下，如果redis将数据全部储存在内存中，一旦redis崩掉，我想后果是什么，大家应该都知道吧。此时redis提供了两种持久化方案RDB与AOF将数据持久化到磁盘。当redis宕机后可以根据RDB或者AOF进行数据恢复。
	
* ##### 主从复制
redis实现了将相同数据产生多个副本。也就是主从复制，做一个热备份。一旦主服务器宕机，从服务器可以提供服务，保证数据不被丢失。
<br >

![image]

* ##### 高可用与分布式
redis2.8版本开始提供了高可用实现Redis Sentinel,它能保证Redis节点故障发现与故障自动转移，从3.0提供了cluster,实现了真正的分布式，提供高可用，读写和容量的扩展性

* ##### redis可以做什么？？？
	* 缓存
	缓存机制几乎所有的网站都会涉及到缓存。使用缓存能提高数据访问速度。还能减轻数据库的压力。一般在高并发情况下数据库承受的并发是有限的。并且Redis还提供了强大的过期策略与内存淘汰机制
	
	* 排行榜系统
	Redis提供了列表与有序集合，合理的使用这些数据结构可以很方便构建的排行榜复杂的数据结构
	
	* 计数应用
	比如说记录某音视频浏览次数，如果是火爆的视频针对数据库频繁的+1，瞬间的并发量全部打在数据库，此时数据库将要扛住很大的压力。严重点可能是数据库宕机。最终导致整个系统不可用。redis天然的实现了原子性的自增。而且是基于纯内存操作。前面也说过redis单机能支撑10w/s的读写。
	
	* 消息队列系统
	很多网站系统都用了队列来进行系统解耦，削峰，异步。而redis提供了发布与订阅的功能。当然跟专门的消息队列中间件来比功能不是很强大。***而且Redis的消息发布与订阅容易丢失数据。***
	

<br >

### 注意
**对于冷数据就不建议放进Redis里面，浪费内存。**

[image]:data:image/png;base64,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
