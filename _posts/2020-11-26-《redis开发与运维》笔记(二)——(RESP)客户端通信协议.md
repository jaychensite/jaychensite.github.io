---
layout: post
title: "《redis开发与运维》笔记(二)——(RESP)客户端通信协议"
date: 2020-11-26 
description: "《redis开发与运维》笔记(二)——(RESP)客户端通信协议"
tag: Redis
--- 
### 《redis开发与运维》笔记(二)——(RESP)客户端通信协议

#### 什么RESP？
	RESP全称REdis Serialization Protocol，即Redis序列化协议。实现客户端与服务端的正常交互。
	
#### Redis为什么使用RESP
	这种协议简单高效，既能被机器解析，又容易理解。
	
	
#### 案列

列如客户端发送一条 set hello world命名给服务端，那么按照Redis规定的RESP协议，客户端解析后的结构如下( ***每行用\r\n分割*** )
```
*3
$3
SET
$5
hello
$5
world
```
Redis服务端接收到命令后。就会按照RESP协议将序列化的命令解析成 set hello world。执行后回复的格式如下：
```
+ok

```

如图：




#### 格式说明
通过上面的列子我们发现RESP序列化后，不管是发送命令还是返回结果都出现了一些特殊字符。现在来看看这些特俗字符分别代表什么意思？

###### 1：发送命令格式
	一条RESP命令格式如下，CRLF代表‘\r\n’。
	
	```
	*<参数数量> CRLF
	$<参数1的字节数量> CRLF
	<参数1> CRLF
	...
	$<参数N的字节数量> CRLF
	<参数N> CRLF
	
	```
回过头来看看前面的列子
```
*3 		   *** 参数数量3 ***
$3			*** 第一个参数字节大小3 ***
SET		   *** 第一个参数 ***
$5			*** 第二个参数字节大小 ***
hello	     *** 第二个参数 ***
$5			*** 第三个参数字节大小 ***
world		 *** 第三个参数***
```

##### 注意
	注意的是上面的是格式化后的结果。实际的传输格式：
	*3\r\n$3\r\nSET\r\n$5\r\nhello\r\n$5\r\nworld\r\n

